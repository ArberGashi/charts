<!doctype html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head th:replace="~{fragments/layout :: head('ArberCharts - 157 Professional Renderers')}"></head>
<body>
<header th:replace="~{fragments/layout :: header('renderers')}"></header>

<main class="main">
    <!-- Hero Header -->
    <div class="hero-header">
        <div class="hero-content">
            <h1 class="hero-title">
                <span class="gradient-text">ArberCharts</span> Renderer Catalog
            </h1>
            <p class="hero-subtitle">
                Professional-grade rendering engine with 157 production renderers
            </p>
            <div class="hero-stats">
                <div class="hero-stat">
                    <div class="hero-stat-value" th:text="${totalCount}">157</div>
                    <div class="hero-stat-label">Renderers</div>
                </div>
                <div class="hero-stat">
                    <div class="hero-stat-value" th:text="${#maps.size(groups)}">11</div>
                    <div class="hero-stat-label">Categories</div>
                </div>
                <div class="hero-stat">
                    <div class="hero-stat-value" th:text="${vectorAvailable ? '‚úì' : '‚úó'}">‚úì</div>
                    <div class="hero-stat-label">Vector API</div>
                </div>
                <div class="hero-stat">
                    <div class="hero-stat-value">‚ö°</div>
                    <div class="hero-stat-label">ZERO-GC</div>
                </div>
            </div>
        </div>
    </div>

    <!-- Category Navigation -->
    <div class="category-nav">
        <button class="category-nav-btn active" data-category="all">
            üé® All Renderers
        </button>
        <button th:each="entry : ${groups}"
                class="category-nav-btn"
                th:attr="data-category=${entry.key},data-color=${categoryColors.get(entry.key)}"
                th:style="'--category-color: ' + ${categoryColors.get(entry.key)}">
            <span th:text="${categoryIcons.get(entry.key)}"></span>
            <span th:text="${entry.key}"></span>
            <span class="badge" th:text="${#lists.size(entry.value)}"></span>
        </button>
    </div>

    <!-- Renderer Categories -->
    <div th:each="entry : ${groups}" class="category-section" th:attr="data-category=${entry.key}">
        <div class="category-header-modern">
            <div class="category-header-left">
                <span class="category-icon"
                      th:text="${categoryIcons.get(entry.key)}"
                      th:style="'color: ' + ${categoryColors.get(entry.key)}"></span>
                <h2 class="category-title" th:text="${entry.key}">Category</h2>
                <span class="category-count" th:text="${#lists.size(entry.value)} + ' renderers'"></span>
            </div>
            <div class="category-header-right">
                <span class="category-color-bar" th:style="'background: ' + ${categoryColors.get(entry.key)}"></span>
            </div>
        </div>

        <div class="renderer-grid-modern">
            <div class="renderer-card-modern"
                 th:each="renderer : ${entry.value}"
                 th:attr="data-category=${entry.key},data-renderer=${renderer.className}">

                <!-- Card Header -->
                <div class="card-header-modern">
                    <div class="card-title-area">
                        <h3 class="card-title" th:text="${renderer.simpleName}">Renderer</h3>
                        <span class="card-badge"
                              th:text="${entry.key}"
                              th:style="'background: ' + ${categoryColors.get(entry.key)}"></span>
                    </div>
                    <div class="card-actions">
                        <button class="icon-btn" title="Animate" data-action="animate">
                            <span>‚ñ∂</span>
                        </button>
                        <button class="icon-btn" title="Full Screen" data-action="fullscreen">
                            <span>‚õ∂</span>
                        </button>
                    </div>
                </div>

                <!-- Chart Preview with Animation Support -->
                <div class="card-preview">
                    <div class="preview-container">
                        <canvas class="preview-canvas"
                                th:attr="data-renderer-class=${renderer.className},data-category=${entry.key}"
                                data-width="800"
                                data-height="480"></canvas>
                        <div class="preview-overlay">
                            <div class="preview-loading">
                                <div class="spinner"></div>
                                <span>Rendering...</span>
                            </div>
                            <div class="preview-error">
                                <span>‚ö†</span>
                                <span class="error-message">Render failed</span>
                            </div>
                        </div>
                    </div>

                    <!-- Interactive Controls (shown on hover) -->
                    <div class="card-controls">
                        <div class="theme-switch">
                            <button data-theme="light" class="active">‚òÄÔ∏è</button>
                            <button data-theme="dark">üåô</button>
                        </div>
                        <div class="size-controls">
                            <button data-size="sm">S</button>
                            <button data-size="md" class="active">M</button>
                            <button data-size="lg">L</button>
                        </div>
                    </div>
                </div>

                <!-- Card Footer with Stats -->
                <div class="card-footer-modern">
                    <div class="card-meta">
                        <code class="renderer-class" th:text="${renderer.className}">com.arbergashi.Renderer</code>
                    </div>
                    <div class="card-stats">
                        <div class="stat-item">
                            <span class="stat-label">Preview:</span>
                            <span class="stat-value preview-state">Loading</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-label">Theme:</span>
                            <span class="stat-value preview-theme">Light</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Animation Showcase Banner -->
    <div class="showcase-banner">
        <div class="showcase-content">
            <h3>üé¨ Animation Capabilities</h3>
            <p>ArberCharts supports real-time animations for financial tickers, medical waveforms, predictive forecasts, and more</p>
            <button class="btn-primary" data-action="demo-animations">
                View Animation Demos
            </button>
        </div>
    </div>
</main>

<footer th:replace="~{fragments/layout :: footer}"></footer>

<!-- Load app.js for canvas-based rendering -->
<script th:src="@{/js/app.js}"></script>

<!-- Enhanced Scripts for Animations -->
<script th:inline="javascript">
    // Category colors from server
    const CATEGORY_COLORS = /*[[${categoryColors}]]*/ {};

    // Animation-capable renderers
    const ANIMATED_RENDERERS = [
        'LiveEKGRenderer',
        'LiveTickerRenderer',
        'RealtimeWaveformRenderer',
        'StreamingCandleRenderer',
        'PredictiveShadowRenderer',
        'MarketDepthRenderer'
    ];
</script>
</body>
</html>
